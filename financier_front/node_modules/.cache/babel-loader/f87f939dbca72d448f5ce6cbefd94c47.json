{"ast":null,"code":"import { createRouter, createWebHashHistory } from 'vue-router';\nimport axios from 'axios';\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  meta: {\n    requireAuth: true\n  },\n  component: () => import('@/views/Home.vue')\n}, {\n  path: '/login',\n  name: 'Login',\n  component: () => import('@/views/Login.vue')\n}];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  if (to.meta.requireAuth) {\n    // 判断该路由是否需要登录权限\n    axios.post('/loginStatus').then(successResponse => {\n      if (successResponse.data.loginState === 200) {\n        next();\n      } else {\n        next('/login');\n      }\n    });\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","axios","routes","path","name","meta","requireAuth","component","router","history","beforeEach","to","from","next","post","then","successResponse","data","loginState"],"sources":["/allPublic/studio/MyGithub/repository/Financier/financier_front/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHashHistory } from 'vue-router'\nimport axios  from 'axios'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    meta:{\n      requireAuth: true,\n    },\n    component:()=>import('@/views/Home.vue')\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: ()=>import('@/views/Login.vue')\n  },\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes,\n})\n\nrouter.beforeEach((to,from,next)=>{\n\tif(to.meta.requireAuth){  // 判断该路由是否需要登录权限\n    axios.post('/loginStatus').then(successResponse => {\n      if (successResponse.data.loginState === 200) {\n        next()\n      } else {\n        next('/login')\n      }\n    })\n\t}else{\n        next()\n    }\n});\n\n\nexport default router\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,oBAAoB,QAAQ,YAAY;AAC/D,OAAOC,KAAK,MAAO,OAAO;AAE1B,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAC;IACHC,WAAW,EAAE;EACf,CAAC;EACDC,SAAS,EAAC,MAAI,MAAM,CAAC,kBAAkB;AACzC,CAAC,EACD;EACEJ,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbG,SAAS,EAAE,MAAI,MAAM,CAAC,mBAAmB;AAC3C,CAAC,CACF;AAED,MAAMC,MAAM,GAAGT,YAAY,CAAC;EAC1BU,OAAO,EAAET,oBAAoB,EAAE;EAC/BE;AACF,CAAC,CAAC;AAEFM,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EACjC,IAAGF,EAAE,CAACN,IAAI,CAACC,WAAW,EAAC;IAAG;IACvBL,KAAK,CAACa,IAAI,CAAC,cAAc,CAAC,CAACC,IAAI,CAACC,eAAe,IAAI;MACjD,IAAIA,eAAe,CAACC,IAAI,CAACC,UAAU,KAAK,GAAG,EAAE;QAC3CL,IAAI,EAAE;MACR,CAAC,MAAM;QACLA,IAAI,CAAC,QAAQ,CAAC;MAChB;IACF,CAAC,CAAC;EACL,CAAC,MAAI;IACEA,IAAI,EAAE;EACV;AACJ,CAAC,CAAC;AAGF,eAAeL,MAAM"},"metadata":{},"sourceType":"module"}